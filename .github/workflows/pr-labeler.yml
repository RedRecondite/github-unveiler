name: PR Labeler

on:
  pull_request:
    types: [opened, edited, reopened, synchronize]

jobs:
  validate-pr:
    runs-on: ubuntu-latest
    steps:
    - name: Checkout code
      uses: actions/checkout@v4

    - name: Check PR title
      env:
        PR_TITLE: ${{ github.event.pull_request.title }}
      run: |
        echo "PR Title: $PR_TITLE"

        # Check if PR title is meaningful (not too short)
        if [ ${#PR_TITLE} -lt 10 ]; then
          echo "PR title is too short. Please provide a more descriptive title."
          exit 1
        fi

        echo "PR title is valid"

    - name: Check for description
      env:
        PR_BODY: ${{ github.event.pull_request.body }}
      run: |
        if [ -z "$PR_BODY" ] || [ ${#PR_BODY} -lt 20 ]; then
          echo "Warning: PR description is empty or too short. Consider adding more details."
          echo "This is just a warning and won't fail the check."
        else
          echo "PR has a description"
        fi
